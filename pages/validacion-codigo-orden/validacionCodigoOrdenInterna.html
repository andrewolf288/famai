<!-- Header con título y botones de acción -->
<div class="d-flex flex-column flex-md-row justify-content-between align-items-center mb-4">
    <h2 class="mb-3 fs-4">Validación Códigos</h2>
    <div class="d-flex gap-2">
        <button class="btn btn-success" id="btn-export-data-almacen">
            Excel Almacén
        </button>
        <button class="btn btn-success" id="btn-validar-materiales">
            Validar
        </button>
    </div>
</div>

<!-- Panel de filtros -->
<div class="card mb-4">
    <div class="card-header">
        <h5 class="card-title mb-0">
            <i class="fas fa-filter me-2"></i>
            Filtros
        </h5>
    </div>
    <div class="card-body">
        <div class="row g-3">
            <!-- Filtros de fechas -->
            <div class="col-12 col-md-3">
                <label for="fechaDesde" class="form-label">Fecha Desde</label>
                <input type="text" id="fechaDesde" class="form-control" placeholder="Seleccione una fecha">
            </div>
            <div class="col-12 col-md-3">
                <label for="fechaHasta" class="form-label">Fecha Hasta</label>
                <input type="text" id="fechaHasta" class="form-control" placeholder="Seleccione una fecha">
            </div>

            <!-- Filtro de búsqueda específica -->
            <div class="col-12 col-md-3">
                <label for="filter-selector" class="form-label">Tipo de Búsqueda</label>
                <select id="filter-selector" class="form-select">
                    <option value="">Seleccione un filtro</option>
                    <option value="odt_numero">Orden de Trabajo</option>
                </select>
            </div>
            <div class="col-12 col-md-3">
                <label for="filter-input" class="form-label">Término de Búsqueda</label>
                <input type="text" id="filter-input" class="form-control" placeholder="Ingrese el término a buscar...">
            </div>

            <!-- Filtros de validación -->
            <div class="col-12 col-md-4">
                <label for="filterMultipleSelector" class="form-label">Estado de Validación</label>
                <select id="filterMultipleSelector" class="form-select" multiple>
                    <option value="verificados">Verificados</option>
                    <option value="no_verificados" selected>No verificados</option>
                    <option value="productos_sin_codigo">Productos sin código</option>
                    <option value="productos_con_codigo">Productos con código</option>
                </select>
            </div>

            <!-- Filtros de estado de orden -->
            <div class="col-12 col-md-4">
                <label for="filterMultipleSelectorEstado" class="form-label">Estado de Orden Interna</label>
                <select id="filterMultipleSelectorEstado" class="form-select" multiple>
                    <option value="REABIERTO">REABIERTO</option>
                    <option value="DESPACHADO">DESPACHADO</option>
                    <option value="ENVIADO" selected>ENVIADO</option>
                    <option value="EVALUADO" selected>EVALUADO</option>
                    <option value="INGRESO">INGRESO</option>
                    <option value="DEVOLUCION">DEVOLUCION</option>
                    <option value="ANULADO">ANULADO</option>
                    <option value="EN ESPERA">EN ESPERA</option>
                    <option value="TERMINADO">TERMINADO</option>
                    <option value="PROCESO">PROCESO</option>
                </select>
            </div>

            <!-- Filtro de sede -->
            <div class="col-12 col-md-4">
                <label for="sedesFilter" class="form-label">Sede</label>
                <select name="sedes" id="sedesFilter" class="form-select">
                    <option value="">Todas las sedes</option>
                </select>
            </div>
        </div>

        <!-- Botones de acción de filtros -->
        <div class="row mt-3">
            <div class="col-12 d-flex justify-content-center">
                <button class="btn btn-primary px-4" id="btn-filtrar">
                    <i class="fas fa-search me-2"></i>
                    Filtrar
                </button>
            </div>
        </div>
    </div>
</div>

<table id="data-container" class="table table-striped nowrap" style="width:100%">
    <thead>
        <th></th>
        <th></th>
        <th>OT</th>
        <th>Área</th>
        <th class="text-center">Tipo</th>
        <th>Fec. Det OI</th>
        <th>Usu. Creador</th>
        <th>Cod Producto</th>
        <th>Descripción</th>
        <th>Observaciones</th>
        <th>Und.</th>
        <th class="text-center">Cantidad</th>
        <th class="text-center">Validar</th>
        <th class="text-center">Estado</th>
    </thead>
    <tbody id="data-container-body">
    </tbody>
</table>

<!-- Modal para validación de código -->
<div class="modal fade" id="asignacionCodigosModal" tabindex="-1" aria-labelledby="asignacionCodigosModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="asignacionCodigosModalLabel">Asignación Código</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- SECCION DE FORM -->
                <div>
                    <input type="text" id="productosInput" class="form-control" placeholder="Buscar material...">
                    <ul id="resultadosLista" class="list-group mt-2"></ul>
                </div>
                <!-- SECCION DE DATA -->
                <table id="tbl-asignar-codigos" class="table mt-3">
                    <thead>
                        <tr>
                            <th class="col-2">Código</th>
                            <th class="col-5">Material</th>
                            <th class="col-2">Stock</th>
                            <th class="col-2">Fec. Ult. Ingreso</th>
                            <th class="col-1">Acciones</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary" id="btn-asignar-codigo" disabled>Asignar</button>
            </div>
        </div>
    </div>
</div>
<!-- MODAL DE INGESO DE NUMERO DE ORDEN INTERNA -->
<div class="modal fade" id="ordenInternaSearchModal" tabindex="-1" aria-labelledby="ordenInternaSearchModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="ordenInternaSearchModalLabel">Buscar Orden Interna</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="mb-3" id="formSearchOrdenInterna">
                    <label for="ordenInternaInput" class="form-label">Número de Orden Interna</label>
                    <input type="text" class="form-control" id="ordenInternaInput">
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="submit" class="btn btn-primary" id="btnExportarExcelAlmacen"
                    form="formSearchOrdenInterna">Exportar</button>
            </div>
        </div>
    </div>
</div>