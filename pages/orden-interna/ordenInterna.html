<h2 class="mb-3 fs-4">Lista de Ordenes Internas</h2>
<div class="row justify-content-end mb-2">
  <div class="col-auto">
    <a href="orden-interna/crear" class="btn btn-agregar">
      Crear Orden Interna
    </a>
  </div>
</div>
<div class="row mb-3">
  <!-- Filtros de fechas -->
  <div class="col-12 col-md-3 mb-3 mb-md-0">
    <div class="d-flex flex-column flex-md-row align-items-end">
      <div class="me-3">
        <label for="fechaDesde" class="form-label">Fecha Desde</label>
        <input type="text" id="fechaDesde" class="form-control" placeholder="Seleccione una fecha">
      </div>
      <div>
        <label for="fechaHasta" class="form-label">Fecha Hasta</label>
        <input type="text" id="fechaHasta" class="form-control" placeholder="Seleccione una fecha">
      </div>
      <button id="filter-dates" class="btn btn-primary ms-md-2 mt-2 mt-md-0">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search"
          viewBox="0 0 16 16">
          <path
            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Filtros a la izquierda -->
  <div class="col-12 col-md-5 mb-3 mb-md-0 d-flex flex-column align-items-center justify-content-end">
    <div class="d-flex flex-column flex-md-row">
      <select id="filter-selector" class="form-select w-100 w-md-auto">
        <option value="">Seleccione un filtro</option>
        <option value="odt_numero">Orden trabajo</option>
        <option value="oic_estado">Estado</option>
      </select>

      <input type="text" id="filter-input" class="form-control w-100 w-md-auto mt-2 mt-md-0 ms-md-2"
        placeholder="Buscar...">

      <button class="btn btn-primary w-25 mt-2 mt-md-0 ms-md-2" id="filter-button">Filtrar</button>
    </div>
  </div>

  <!-- Paginación a la derecha -->
  <div class="col-12 col-md-4 d-flex flex-column align-items-center justify-content-end">
    <div class="pagination-container" id="pagination-container"></div>
  </div>
</div>

<table id="data-container" class="table table-striped nowrap" style="width:100%">
  <thead>
    <th>Nro. OT</th>
    <th>Estado OT</th>
    <th>Cliente</th>
    <th>Fecha</th>
    <th>Área</th>
    <th>Materiales</th>
    <th>Estado OI</th>
    <th>Acciones</th>
    <th>Fec. Creación</th>
    <th>Usu. Creador</th>
    <th>Fec. Actualización</th>
    <th>Usu. Actualizador</th>
  </thead>
  <tbody id="data-container-body">
  </tbody>
</table>

<!-- Dialog para cambio de estado -->
<div class="modal fade" id="changeEstadoOI" tabindex="-1" aria-labelledby="changeEstadoOILabel" aria-hidden="true">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="changeEstadoOILabel">Cambiar Estado</h1>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body orange-form">
        <form id="changeEstadoOIForm">
          <input type="text" id="idOI" hidden>
          <p>Estado actual: <span id="estadoActualOI" class="badge bg-primary"></span></p>
          <label for="estadoOISelect" class="form-label">Estado de OI</label>
          <select name="estadoOISelect" id="estadoOISelect" class="form-control">
          </select>
        </form>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
          <button type="button" class="btn btn-primary" id="changeEstadoOIBtn">Guardar</button>
        </div>
      </div>

    </div>
  </div>
</div>

<!-- PREVIEW -->
<div class="modal fade" id="previewPDFModal" tabindex="-1" aria-labelledby="previewPDFModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-fullscreen">
      <div class="modal-content">
          <div class="modal-header">
              <h5 class="modal-title" id="previewPDFModalLabel">Previsualizar Orden Interna</h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
              <div style="height: 80vh;">
                  <iframe id="pdf-frame" width="100%" height="100%" style="border: none;"></iframe>
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          </div>
      </div>
  </div>
</div>